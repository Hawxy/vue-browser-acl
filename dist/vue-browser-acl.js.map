{"version":3,"sources":["/Users/mblarsen/workspace/mblarsen/vue-browser-acl/vue-browser-acl.js","/Users/mblarsen/workspace/mblarsen/vue-browser-acl/webpack/bootstrap 2d92d55253a928d10c79","/Users/mblarsen/workspace/mblarsen/vue-browser-acl/index.js","/Users/mblarsen/workspace/mblarsen/vue-browser-acl/external \"browser-acl\""],"names":["module","exports","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","_toConsumableArray","arr","Array","isArray","arr2","length","from","_toArray","commentNode","el","vnode","comment","document","createComment","value","text","elm","isComment","context","undefined","tag","data","directives","componentInstance","$el","parentNode","replaceChild","__WEBPACK_IMPORTED_MODULE_0_browser_acl__","__WEBPACK_IMPORTED_MODULE_0_browser_acl___default","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","push","err","TypeError","install","Vue","user","setupCallback","options","arguments","userAccessor","assign","acl","caseMode","helper","directive","strictRoutes","a","router","beforeEach","to","fail","meta","can","next_","verb","subject","_len","otherArgs","_key","_acl","apply","concat","_split","split","_split2","_split2$","_split2$2","binding","_acl2","behaviour","modifiers","disable","params","_binding$value","slice","_binding$value$split","_binding$value$split2","match","Error","aclMethod","some","every","disabled","_acl3","_acl4","_acl5","require"],"mappings":"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","file":"vue-browser-acl.js","sourcesContent":["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!************************!*\\\n  !*** multi ./index.js ***!\n  \\************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! /Users/mblarsen/workspace/mblarsen/vue-browser-acl/index.js */1);\n\n\n/***/ }),\n/* 1 */\n/*!******************!*\\\n  !*** ./index.js ***!\n  \\******************/\n/*! exports provided: default */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_browser_acl__ = __webpack_require__(/*! browser-acl */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_browser_acl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_browser_acl__);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _toArray(arr) { return Array.isArray(arr) ? arr : Array.from(arr); }\n\n\n\n/**\n * VueAcl constructor function\n *\n * ```javascript\n * import VueAcl from 'vue-browser-acl'\n *\n * VueAcl(() => user, (acl) => {\n *   acl.rule(view, Post)\n *   acl.rule([edit, delete], Post, (user, post) => post.userId === user.id)\n *   acl.rule('moderate', Post, (user) => user.isModerator())\n * })\n * ```\n *\n * @access public\n * @param {Function|Object} user A user instance or a function that returns the user\n * @param {Function|Object} setupCallback A configured Acl instance or a callback callback that\n *                                        adds rules and policies.\n * @param {Object} options={}\n * @param {Boolean} [options.directive='can'] Name of the directive, and helper function\n * @param {Boolean} [options.helper=true] Adds helper function\n * @param {Boolean} [options.caseMode=true] When true lower case subjects will be\n *                                          looked up on the vue context\n * @param {Boolean} [options.strictRoutes=false] Will fail if route permissions are absent\n * @param {Object} [options.acl={}] Options passed to the Acl constructor\n * @param {?Object} options.router Vue router\n */\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  install: function install(Vue, user, setupCallback) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n\n    /* ensure userAccessor is function */\n    var userAccessor = typeof user === 'function' ? user : function () {\n      return user;\n    };\n\n    /* defaults */\n    options = Object.assign({\n      acl: {},\n      caseMode: true,\n      helper: true,\n      directive: 'can',\n      strictRoutes: false\n    }, options);\n\n    /* setup acl */\n    var acl = setupCallback;\n    if (!(setupCallback instanceof __WEBPACK_IMPORTED_MODULE_0_browser_acl___default.a)) {\n      acl = new __WEBPACK_IMPORTED_MODULE_0_browser_acl___default.a(options.acl);\n      setupCallback(acl);\n    }\n\n    /* router init function */\n    acl.router = function (router) {\n      options.router = router;\n      router.beforeEach(function (to, from, next) {\n        var fail = to.meta.fail || '/';\n        var meta = to.meta || {};\n\n        if (typeof meta.can === 'function') {\n          var next_ = function next_(verb, subject) {\n            for (var _len = arguments.length, otherArgs = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n              otherArgs[_key - 2] = arguments[_key];\n            }\n\n            var _acl;\n\n            if (subject && (_acl = acl).can.apply(_acl, [userAccessor()].concat(otherArgs)) || !subject && !options.strictRoutes) {\n              return next();\n            }\n            next(fail);\n          };\n          return meta.can(to, from, next_);\n        }\n\n        var _split = (to.meta.can || '').split(' '),\n            _split2 = _slicedToArray(_split, 2),\n            _split2$ = _split2[0],\n            verb = _split2$ === undefined ? null : _split2$,\n            _split2$2 = _split2[1],\n            subject = _split2$2 === undefined ? null : _split2$2;\n\n        if (subject && acl.can(userAccessor(), verb, subject) || !subject && !options.strictRoutes) {\n          return next();\n        }\n        next(fail);\n      });\n    };\n\n    /* init router */\n    if (options.router) {\n      acl.router(options.router);\n    }\n\n    /* create directive */\n    Vue.directive(options.directive, function (el, binding, vnode) {\n      var _acl2;\n\n      var behaviour = binding.modifiers.disable ? 'disable' : 'hide';\n\n      var verb = void 0,\n          subject = void 0,\n          params = void 0;\n      if (Array.isArray(binding.value)) {\n        var _binding$value = _toArray(binding.value);\n\n        verb = _binding$value[0];\n        subject = _binding$value[1];\n        params = _binding$value.slice(2);\n      } else if (typeof binding.value === 'string') {\n        var _binding$value$split = binding.value.split(' ');\n\n        var _binding$value$split2 = _slicedToArray(_binding$value$split, 2);\n\n        verb = _binding$value$split2[0];\n        subject = _binding$value$split2[1];\n\n        if (typeof subject === 'string' && options.caseMode && subject[0].match(/[a-z]/)) {\n          subject = vnode.context[subject];\n        }\n        params = [];\n      }\n\n      if (!verb || !subject) {\n        throw new Error('Missing verb or subject');\n      }\n\n      var aclMethod = binding.modifiers.some && 'some' || binding.modifiers.every && 'every' || 'can';\n      var ok = (_acl2 = acl)[aclMethod].apply(_acl2, [userAccessor(), verb, subject].concat(_toConsumableArray(params)));\n\n      if (!ok) {\n        if (behaviour === 'hide') {\n          commentNode(el, vnode);\n        } else if (behaviour === 'disable') {\n          el.disabled = true;\n        }\n      }\n    });\n\n    /* define helpers */\n    if (options.helper) {\n      var helper = '$' + options.directive;\n      Vue.prototype[helper] = function () {\n        var _acl3;\n\n        return (_acl3 = acl).can.apply(_acl3, [userAccessor()].concat(Array.prototype.slice.call(arguments)));\n      };\n      Vue.prototype[helper].every = function () {\n        var _acl4;\n\n        return (_acl4 = acl).every.apply(_acl4, [userAccessor()].concat(Array.prototype.slice.call(arguments)));\n      };\n      Vue.prototype[helper].some = function () {\n        var _acl5;\n\n        return (_acl5 = acl).some.apply(_acl5, [userAccessor()].concat(Array.prototype.slice.call(arguments)));\n      };\n    }\n  }\n\n  /**\n   * Create comment node\n   *\n   * @private\n   * @author https://stackoverflow.com/questions/43003976/a-custom-directive-similar-to-v-if-in-vuejs#43543814\n   */\n});function commentNode(el, vnode) {\n  var comment = document.createComment(' ');\n\n  Object.defineProperty(comment, 'setAttribute', {\n    value: function value() {\n      return undefined;\n    }\n  });\n\n  vnode.text = ' ';\n  vnode.elm = comment;\n  vnode.isComment = true;\n  vnode.context = undefined;\n  vnode.tag = undefined;\n  vnode.data.directives = undefined;\n\n  if (vnode.componentInstance) {\n    vnode.componentInstance.$el = comment;\n  }\n\n  if (el.parentNode) {\n    el.parentNode.replaceChild(comment, el);\n  }\n}\n\n/***/ }),\n/* 2 */\n/*!******************************!*\\\n  !*** external \"browser-acl\" ***!\n  \\******************************/\n/*! dynamic exports provided */\n/*! exports used: default */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"browser-acl\");\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// vue-browser-acl.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2d92d55253a928d10c79","import Acl from 'browser-acl'\n\n/**\n * VueAcl constructor function\n *\n * ```javascript\n * import VueAcl from 'vue-browser-acl'\n *\n * VueAcl(() => user, (acl) => {\n *   acl.rule(view, Post)\n *   acl.rule([edit, delete], Post, (user, post) => post.userId === user.id)\n *   acl.rule('moderate', Post, (user) => user.isModerator())\n * })\n * ```\n *\n * @access public\n * @param {Function|Object} user A user instance or a function that returns the user\n * @param {Function|Object} setupCallback A configured Acl instance or a callback callback that\n *                                        adds rules and policies.\n * @param {Object} options={}\n * @param {Boolean} [options.directive='can'] Name of the directive, and helper function\n * @param {Boolean} [options.helper=true] Adds helper function\n * @param {Boolean} [options.caseMode=true] When true lower case subjects will be\n *                                          looked up on the vue context\n * @param {Boolean} [options.strictRoutes=false] Will fail if route permissions are absent\n * @param {Object} [options.acl={}] Options passed to the Acl constructor\n * @param {?Object} options.router Vue router\n */\nexport default {\n  install: function (Vue, user, setupCallback, options = {}) {\n\n    /* ensure userAccessor is function */\n    const userAccessor = typeof user === 'function' ? user : () => user\n\n    /* defaults */\n    options = Object.assign({\n      acl: {},\n      caseMode: true,\n      helper: true,\n      directive: 'can',\n      strictRoutes: false,\n    }, options)\n\n    /* setup acl */\n    let acl = setupCallback\n    if (!(setupCallback instanceof Acl)) {\n      acl = new Acl(options.acl)\n      setupCallback(acl)\n    }\n\n    /* router init function */\n    acl.router = function (router) {\n      options.router = router\n      router.beforeEach((to, from, next) => {\n        const fail = to.meta.fail || '/'\n        const meta = to.meta || {}\n\n        if (typeof meta.can === 'function') {\n          const next_ = (verb, subject, ...otherArgs) => {\n            if ((subject && acl.can(userAccessor(), ...otherArgs)) || (!subject && !options.strictRoutes)) {\n              return next()\n            }\n            next(fail)\n          }\n          return meta.can(to, from, next_)\n        }\n\n        const [verb = null, subject = null] = (to.meta.can || '').split(' ')\n        if ((subject && acl.can(userAccessor(), verb, subject)) || (!subject && !options.strictRoutes)) {\n          return next()\n        }\n        next(fail)\n      })\n    }\n\n    /* init router */\n    if (options.router) {\n      acl.router(options.router)\n    }\n\n    /* create directive */\n    Vue.directive(options.directive, function (el, binding, vnode) {\n      const behaviour = binding.modifiers.disable ? 'disable' : 'hide'\n\n      let verb, subject, params\n      if (Array.isArray(binding.value)) {\n        [verb, subject, ...params] = binding.value\n      } else if (typeof binding.value === 'string') {\n        [verb, subject] = binding.value.split(' ')\n        if (typeof subject === 'string' && options.caseMode && subject[0].match(/[a-z]/)) {\n          subject = vnode.context[subject]\n        }\n        params = []\n      }\n\n      if (!verb || !subject) {\n        throw new Error('Missing verb or subject')\n      }\n\n      const aclMethod = (binding.modifiers.some && 'some') || (binding.modifiers.every && 'every') || 'can'\n      const ok = acl[aclMethod](userAccessor(), verb, subject, ...params)\n\n      if (!ok) {\n        if (behaviour === 'hide') {\n          commentNode(el, vnode)\n        } else if (behaviour === 'disable') {\n          el.disabled = true\n        }\n      }\n    })\n\n    /* define helpers */\n    if (options.helper) {\n      const helper = `$${options.directive}`\n      Vue.prototype[helper] = function () {\n        return acl.can(userAccessor(), ...arguments)\n      }\n      Vue.prototype[helper].every = function () {\n        return acl.every(userAccessor(), ...arguments)\n      }\n      Vue.prototype[helper].some = function () {\n        return acl.some(userAccessor(), ...arguments)\n      }\n    }\n  }\n}\n\n/**\n * Create comment node\n *\n * @private\n * @author https://stackoverflow.com/questions/43003976/a-custom-directive-similar-to-v-if-in-vuejs#43543814\n */\nfunction commentNode(el, vnode) {\n  const comment = document.createComment(' ')\n\n  Object.defineProperty(comment, 'setAttribute', {\n    value: () => undefined\n  })\n\n  vnode.text = ' '\n  vnode.elm = comment\n  vnode.isComment = true\n  vnode.context = undefined\n  vnode.tag = undefined\n  vnode.data.directives = undefined\n\n  if (vnode.componentInstance) {\n    vnode.componentInstance.$el = comment\n  }\n\n  if (el.parentNode) {\n    el.parentNode.replaceChild(comment, el)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","module.exports = require(\"browser-acl\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"browser-acl\"\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}