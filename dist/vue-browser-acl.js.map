{"version":3,"sources":["webpack:///vue-browser-acl.js","webpack:///webpack/bootstrap e0813bb58fa80bfcc801","webpack:///./index.js","webpack:///external \"browser-acl\""],"names":["module","exports","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","_toConsumableArray","arr","Array","isArray","arr2","length","from","commentNode","el","vnode","comment","document","createComment","value","text","elm","isComment","tag","undefined","data","directives","componentInstance","$el","parentNode","replaceChild","__WEBPACK_IMPORTED_MODULE_0_browser_acl__","__WEBPACK_IMPORTED_MODULE_0_browser_acl___default","_typeof","Symbol","iterator","obj","constructor","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","next","done","push","err","TypeError","install","Vue","user","setupCallback","options","arguments","userAccessor","strict","Boolean","assign","acl","caseMode","helper","directive","failRoute","assumeGlobal","a","router","canNavigate","verb","subject","_len","otherArgs","_key","_acl","can","apply","concat","metaToStatementPair","meta","_split","split","_split2","_split2$","_split2$2","chainCans","metas","to","fail","chain","reduce","then","result","nextPromise","Promise","resovle","Error","catch","error","resolve","getFail","beforeEach","matched","filter","route","map","path","binding","_acl2","behaviour","modifiers","disable","verbArg","params","arg","_ref","global","arrayToGlobalExprTpl","arrayToExprTpl","_ref2","_stringToExprTpl","stringToExprTpl","_stringToExprTpl2","aclMethod","some","every","ok","not","disabled","readOnly","_acl3","slice","_acl4","_acl5","_acl6","_ref3","_ref4","_ref5","_ref6","_ref7","match","context","require"],"mappings":"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","file":"vue-browser-acl.js","sourcesContent":["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!************************!*\\\n  !*** multi ./index.js ***!\n  \\************************/\n/*! dynamic exports provided */\n/*! all exports used */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(/*! /Users/mblarsen/workspace/mblarsen/vue-browser-acl/index.js */1);\n\n\n/***/ }),\n/* 1 */\n/*!******************!*\\\n  !*** ./index.js ***!\n  \\******************/\n/*! exports provided: default */\n/*! all exports used */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_browser_acl__ = __webpack_require__(/*! browser-acl */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_browser_acl___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_browser_acl__);\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\n/**\n * VueAcl constructor function\n *\n * ```javascript\n * import Vue from 'vue'\n * import Acl from 'vue-browser-acl'\n *\n * Vue.use(Acl, user, (acl) => {\n *   acl.rule(view, Post)\n *   acl.rule([edit, delete], Post, (user, post) => post.userId === user.id)\n *   acl.rule('moderate', Post, (user) => user.isModerator())\n * })\n * ```\n *\n * @access public\n * @param {Function|Object} user A user instance or a function that returns the user\n * @param {Function|Object} setupCallback A configured Acl instance or a callback callback that adds rules and policies.\n * @param {Object}   options={}\n * @param {Object}  [options.acl={}] Options passed to the Acl constructor\n * @param {Boolean} [options.caseMode=true] When true lower case subjects will be looked up on the vue context\n * @param {Boolean} [options.directive='can'] Name of the directive, and helper function\n * @param {Boolean} [options.helper=true] Adds helper function\n * @param {Boolean} [options.strict=false] Causes redirect to fail route if route permissions are absent\n * @param {String|Object} [options.failRoute='/'] Set a default fail route\n * @param {Boolean} [options.assumeGlobal=true] If no subject is specified in route assume it is a global rule\n * @param {?Object}  options.router Vue router\n */\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  install: function install(Vue, user, setupCallback) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    /* ensure userAccessor is function */\n    var userAccessor = typeof user === 'function' ? user : function () {\n      return user;\n    };\n\n    /* defaults */\n    var strict = Boolean(options.strict);\n    options = Object.assign({\n      acl: { strict: strict },\n      caseMode: true,\n      helper: true,\n      directive: 'can',\n      strict: false,\n      failRoute: '/',\n      assumeGlobal: !strict\n    }, options);\n\n    /* setup acl */\n    var acl = setupCallback;\n    if (!(setupCallback instanceof __WEBPACK_IMPORTED_MODULE_0_browser_acl___default.a)) {\n      acl = new __WEBPACK_IMPORTED_MODULE_0_browser_acl___default.a(options.acl);\n      setupCallback(acl);\n    }\n\n    /* router init function */\n    acl.router = function (router) {\n      options.router = router;\n\n      var canNavigate = function canNavigate(verb, subject) {\n        for (var _len = arguments.length, otherArgs = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n          otherArgs[_key - 2] = arguments[_key];\n        }\n\n        var _acl;\n\n        return subject && (_acl = acl).can.apply(_acl, [userAccessor(), verb, subject].concat(otherArgs)) || !subject && !options.strict;\n      };\n\n      /* convert 'edit Post' to ['edit', 'Post'] */\n      var metaToStatementPair = function metaToStatementPair(meta) {\n        var _split = (meta.can || '').split(' '),\n            _split2 = _slicedToArray(_split, 2),\n            _split2$ = _split2[0],\n            verb = _split2$ === undefined ? null : _split2$,\n            _split2$2 = _split2[1],\n            subject = _split2$2 === undefined ? options.assumeGlobal ? __WEBPACK_IMPORTED_MODULE_0_browser_acl__[\"GlobalRule\"] : null : _split2$2;\n\n        return [verb, subject];\n      };\n\n      /**\n       * chain all can-statements and functions as promises\n       * each can-function must return a promise (in strict\n       * mode at least). To break the chain return a none\n       * true value\n       */\n      var chainCans = function chainCans(metas, to, from) {\n        var fail = null;\n        var chain = metas.reduce(function (chain, meta) {\n          return chain.then(function (result) {\n            if (result !== true) {\n              return result;\n            }\n\n            fail = meta.fail;\n\n            var nextPromise = typeof meta.can === 'function' ? meta.can(to, from, canNavigate) : Promise.resovle(canNavigate.apply(undefined, _toConsumableArray(metaToStatementPair(meta))));\n\n            if (options.strict && !(nextPromise instanceof Promise)) {\n              throw new Error('$route.meta.can must return a promise in strict mode');\n            }\n\n            return nextPromise;\n          }).catch(function (error) {\n            return false;\n          }); // convert errors to false\n        }, Promise.resolve(true));\n        chain.getFail = function () {\n          return fail;\n        };\n        return chain;\n      };\n\n      router.beforeEach(function (to, from, next) {\n        var metas = to.matched.filter(function (route) {\n          return route.meta && route.meta.can;\n        }).map(function (route) {\n          return route.meta;\n        });\n\n        var chain = chainCans(metas, to, from);\n        chain.then(function (result) {\n          if (result === true) {\n            return next();\n          }\n          var fail = chain.getFail() === '$from' ? from.path : chain.getFail();\n          next(fail || options.failRoute);\n        });\n      });\n    };\n\n    /* init router */\n    if (options.router) {\n      acl.router(options.router);\n    }\n\n    /* create directive */\n    Vue.directive(options.directive, function (el, binding, vnode) {\n      var _acl2;\n\n      var behaviour = binding.modifiers.disable ? 'disable' : 'hide';\n\n      var verb = void 0,\n          verbArg = void 0,\n          subject = void 0,\n          params = void 0;\n      verbArg = binding.arg;\n      if (Array.isArray(binding.value)) {\n        var _ref = binding.modifiers.global ? arrayToGlobalExprTpl(binding) : arrayToExprTpl(binding);\n\n        var _ref2 = _slicedToArray(_ref, 3);\n\n        verb = _ref2[0];\n        subject = _ref2[1];\n        params = _ref2[2];\n      } else if (typeof binding.value === 'string') {\n        var _stringToExprTpl = stringToExprTpl(binding, vnode, options);\n\n        var _stringToExprTpl2 = _slicedToArray(_stringToExprTpl, 3);\n\n        verb = _stringToExprTpl2[0];\n        subject = _stringToExprTpl2[1];\n        params = _stringToExprTpl2[2];\n      } else if (verbArg && _typeof(binding.value) === 'object') {\n        verb = verbArg;\n        subject = binding.value;\n        params = [];\n      } else if (binding.value === undefined && !binding.modifiers.global && options.assumeGlobal) {\n        // Fall back to global if no value is provided\n        verb = verbArg;\n        subject = __WEBPACK_IMPORTED_MODULE_0_browser_acl__[\"GlobalRule\"];\n        params = [];\n      }\n\n      if (options.assumeGlobal && !subject) {\n        subject = __WEBPACK_IMPORTED_MODULE_0_browser_acl__[\"GlobalRule\"];\n        params = params || [];\n        verb = verb || verbArg;\n      }\n\n      if (!verb || !subject) {\n        throw new Error('Missing verb or subject');\n      }\n\n      var aclMethod = binding.modifiers.some && 'some' || binding.modifiers.every && 'every' || 'can';\n\n      var ok = (_acl2 = acl)[aclMethod].apply(_acl2, [userAccessor(), verb, subject].concat(_toConsumableArray(params)));\n      var not = binding.modifiers.not;\n\n      if (ok && not || !ok && !not) {\n        if (behaviour === 'hide') {\n          commentNode(el, vnode);\n        } else if (behaviour === 'disable') {\n          el.disabled = true;\n        } else if (behaviour === 'readonly') {\n          el.readOnly = true;\n        }\n      }\n    });\n\n    /* define helpers */\n    if (options.helper) {\n      var helper = '$' + options.directive;\n      Vue.prototype[helper] = function () {\n        var _acl3;\n\n        return (_acl3 = acl).can.apply(_acl3, [userAccessor()].concat(Array.prototype.slice.call(arguments)));\n      };\n      Vue.prototype[helper].not = function () {\n        var _acl4;\n\n        return !(_acl4 = acl).can.apply(_acl4, [userAccessor()].concat(Array.prototype.slice.call(arguments)));\n      };\n      Vue.prototype[helper].every = function () {\n        var _acl5;\n\n        return (_acl5 = acl).every.apply(_acl5, [userAccessor()].concat(Array.prototype.slice.call(arguments)));\n      };\n      Vue.prototype[helper].some = function () {\n        var _acl6;\n\n        return (_acl6 = acl).some.apply(_acl6, [userAccessor()].concat(Array.prototype.slice.call(arguments)));\n      };\n    }\n  }\n\n  /**\n   * Create comment node\n   *\n   * @private\n   * @author https://stackoverflow.com/questions/43003976/a-custom-directive-similar-to-v-if-in-vuejs#43543814\n   */\n});function commentNode(el, vnode) {\n  var comment = document.createComment(' ');\n\n  Object.defineProperty(comment, 'setAttribute', {\n    value: function value() {\n      return undefined;\n    }\n  });\n\n  vnode.text = ' ';\n  vnode.elm = comment;\n  vnode.isComment = true;\n  vnode.tag = undefined;\n  vnode.data.directives = undefined;\n\n  if (vnode.componentInstance) {\n    vnode.componentInstance.$el = comment;\n  }\n\n  if (el.parentNode) {\n    el.parentNode.replaceChild(comment, el);\n  }\n}\n\n/**\n * Maps binding.value of type array to expression tuple\n */\nvar arrayToExprTpl = function arrayToExprTpl(_ref3) {\n  var arg = _ref3.arg,\n      value = _ref3.value;\n  return [arg || value[0], arg ? value[0] : value[1], arg ? value.slice(1) : value.slice(2)];\n};\n\n/**\n * Maps binding.value of type array to global expression tuple\n */\nvar arrayToGlobalExprTpl = function arrayToGlobalExprTpl(_ref4) {\n  var arg = _ref4.arg,\n      value = _ref4.value;\n  return [arg || value[0], __WEBPACK_IMPORTED_MODULE_0_browser_acl__[\"GlobalRule\"], arg ? value : value.slice(1)];\n};\n\n/**\n * Maps binding.value of type string to expression tuple\n */\nvar stringToExprTpl = function stringToExprTpl(_ref5, vnode, options) {\n  var arg = _ref5.arg,\n      value = _ref5.value,\n      modifiers = _ref5.modifiers;\n\n  var _ref6 = arg ? [arg, value] : value.split(' '),\n      _ref7 = _slicedToArray(_ref6, 2),\n      verb = _ref7[0],\n      subject = _ref7[1];\n\n  if (subject && modifiers.global) {\n    throw new Error('You cannot provide subject and use global modifier at the same time');\n  }\n\n  if (typeof subject === 'string' && options.caseMode && subject[0].match(/[a-z]/)) {\n    subject = vnode.context[subject];\n  }\n\n  return [verb, subject, []];\n};\n\n/***/ }),\n/* 2 */\n/*!******************************!*\\\n  !*** external \"browser-acl\" ***!\n  \\******************************/\n/*! dynamic exports provided */\n/*! exports used: GlobalRule, default */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"browser-acl\");\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// vue-browser-acl.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e0813bb58fa80bfcc801","import Acl, { GlobalRule } from 'browser-acl'\n\n/**\n * VueAcl constructor function\n *\n * ```javascript\n * import Vue from 'vue'\n * import Acl from 'vue-browser-acl'\n *\n * Vue.use(Acl, user, (acl) => {\n *   acl.rule(view, Post)\n *   acl.rule([edit, delete], Post, (user, post) => post.userId === user.id)\n *   acl.rule('moderate', Post, (user) => user.isModerator())\n * })\n * ```\n *\n * @access public\n * @param {Function|Object} user A user instance or a function that returns the user\n * @param {Function|Object} setupCallback A configured Acl instance or a callback callback that adds rules and policies.\n * @param {Object}   options={}\n * @param {Object}  [options.acl={}] Options passed to the Acl constructor\n * @param {Boolean} [options.caseMode=true] When true lower case subjects will be looked up on the vue context\n * @param {Boolean} [options.directive='can'] Name of the directive, and helper function\n * @param {Boolean} [options.helper=true] Adds helper function\n * @param {Boolean} [options.strict=false] Causes redirect to fail route if route permissions are absent\n * @param {String|Object} [options.failRoute='/'] Set a default fail route\n * @param {Boolean} [options.assumeGlobal=true] If no subject is specified in route assume it is a global rule\n * @param {?Object}  options.router Vue router\n */\nexport default {\n  install: function (Vue, user, setupCallback, options = {}) {\n    /* ensure userAccessor is function */\n    const userAccessor = typeof user === 'function' ? user : () => user\n\n    /* defaults */\n    const strict = Boolean(options.strict)\n    options = Object.assign(\n      {\n        acl: { strict },\n        caseMode: true,\n        helper: true,\n        directive: 'can',\n        strict: false,\n        failRoute: '/',\n        assumeGlobal: !strict,\n      },\n      options\n    )\n\n    /* setup acl */\n    let acl = setupCallback\n    if (!(setupCallback instanceof Acl)) {\n      acl = new Acl(options.acl)\n      setupCallback(acl)\n    }\n\n    /* router init function */\n    acl.router = function (router) {\n      options.router = router\n\n      const canNavigate = (verb, subject, ...otherArgs) => {\n        return (subject && acl.can(userAccessor(), verb, subject, ...otherArgs)) ||\n          (!subject && !options.strict)\n      }\n\n      /* convert 'edit Post' to ['edit', 'Post'] */\n      const metaToStatementPair = meta => {\n        const [\n          verb = null,\n          subject = options.assumeGlobal ? GlobalRule : null\n        ] = (meta.can || '').split(' ')\n        return [verb, subject]\n      }\n\n      /**\n       * chain all can-statements and functions as promises\n       * each can-function must return a promise (in strict\n       * mode at least). To break the chain return a none\n       * true value\n       */\n      const chainCans = (metas, to, from) => {\n        let fail = null\n        const chain = metas.reduce((chain, meta) => {\n          return chain\n            .then(result => {\n              if (result !== true) {\n                return result\n              }\n\n              fail = meta.fail\n\n              const nextPromise = typeof meta.can === 'function'\n                ? meta.can(to, from, canNavigate)\n                : Promise.resovle(canNavigate(...metaToStatementPair(meta)))\n\n              if (options.strict && !(nextPromise instanceof Promise)) {\n                throw new Error('$route.meta.can must return a promise in strict mode')\n              }\n\n              return nextPromise\n            })\n            .catch(error => false) // convert errors to false\n        }, Promise.resolve(true))\n        chain.getFail = () => fail\n        return chain\n      }\n\n      router.beforeEach((to, from, next) => {\n        const metas = to.matched\n          .filter(route => route.meta && route.meta.can)\n          .map(route => route.meta)\n\n        const chain = chainCans(metas, to, from)\n        chain.then(result => {\n          if (result === true) {\n            return next()\n          }\n          const fail = chain.getFail() === '$from'\n            ? from.path\n            : chain.getFail()\n          next(fail || options.failRoute)\n        })\n      })\n    }\n\n    /* init router */\n    if (options.router) {\n      acl.router(options.router)\n    }\n\n    /* create directive */\n    Vue.directive(options.directive, function(el, binding, vnode) {\n      const behaviour = binding.modifiers.disable ? 'disable' : 'hide'\n\n      let verb, verbArg, subject, params\n      verbArg = binding.arg\n      if (Array.isArray(binding.value)) {\n        [verb, subject, params] = binding.modifiers.global\n          ? arrayToGlobalExprTpl(binding)\n          : arrayToExprTpl(binding)\n      } else if (typeof binding.value === 'string') {\n        [verb, subject, params] = stringToExprTpl(binding, vnode, options)\n      } else if (verbArg && typeof binding.value === 'object') {\n        verb = verbArg\n        subject = binding.value\n        params = []\n      } else if (binding.value === undefined && !binding.modifiers.global && options.assumeGlobal) {\n        // Fall back to global if no value is provided\n        verb = verbArg\n        subject = GlobalRule\n        params = []\n      }\n\n      if (options.assumeGlobal && !subject) {\n        subject = GlobalRule\n        params = params || []\n        verb = verb || verbArg\n      }\n\n      if (!verb || !subject) {\n        throw new Error('Missing verb or subject')\n      }\n\n      const aclMethod =\n        (binding.modifiers.some && 'some') ||\n        (binding.modifiers.every && 'every') ||\n        'can'\n\n      const ok = acl[aclMethod](userAccessor(), verb, subject, ...params)\n      const not = binding.modifiers.not\n\n      if ((ok && not) || (!ok && !not)) {\n        if (behaviour === 'hide') {\n          commentNode(el, vnode)\n        } else if (behaviour === 'disable') {\n          el.disabled = true\n        } else if (behaviour === 'readonly') {\n          el.readOnly = true\n        }\n      }\n    })\n\n    /* define helpers */\n    if (options.helper) {\n      const helper = `$${options.directive}`\n      Vue.prototype[helper] = function () {\n        return acl.can(userAccessor(), ...arguments)\n      }\n      Vue.prototype[helper].not = function () {\n        return !acl.can(userAccessor(), ...arguments)\n      }\n      Vue.prototype[helper].every = function () {\n        return acl.every(userAccessor(), ...arguments)\n      }\n      Vue.prototype[helper].some = function () {\n        return acl.some(userAccessor(), ...arguments)\n      }\n    }\n  }\n}\n\n/**\n * Create comment node\n *\n * @private\n * @author https://stackoverflow.com/questions/43003976/a-custom-directive-similar-to-v-if-in-vuejs#43543814\n */\nfunction commentNode(el, vnode) {\n  const comment = document.createComment(' ')\n\n  Object.defineProperty(comment, 'setAttribute', {\n    value: () => undefined\n  })\n\n  vnode.text = ' '\n  vnode.elm = comment\n  vnode.isComment = true\n  vnode.tag = undefined\n  vnode.data.directives = undefined\n\n  if (vnode.componentInstance) {\n    vnode.componentInstance.$el = comment\n  }\n\n  if (el.parentNode) {\n    el.parentNode.replaceChild(comment, el)\n  }\n}\n\n/**\n * Maps binding.value of type array to expression tuple\n */\nconst arrayToExprTpl = ({arg, value}) => ([\n  arg || value[0],\n  arg ? value[0] : value[1],\n  arg ? value.slice(1) : value.slice(2)\n])\n\n/**\n * Maps binding.value of type array to global expression tuple\n */\nconst arrayToGlobalExprTpl = ({arg, value}) => ([\n  arg || value[0],\n  GlobalRule,\n  arg ? value : value.slice(1)\n])\n\n/**\n * Maps binding.value of type string to expression tuple\n */\nconst stringToExprTpl = ({arg, value, modifiers}, vnode, options) => {\n  let [verb, subject] = arg ? [arg, value] : value.split(' ')\n\n  if (subject && modifiers.global) {\n    throw new Error('You cannot provide subject and use global modifier at the same time')\n  }\n\n  if (\n    typeof subject === 'string' &&\n    options.caseMode &&\n    subject[0].match(/[a-z]/)\n  ) {\n    subject = vnode.context[subject]\n  }\n\n  return [verb, subject, []]\n}\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","module.exports = require(\"browser-acl\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"browser-acl\"\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}